(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{461:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(2221),a=r(1801),n=r(7386),i=r(4542),c=r(2441),l=r(8175),d=r(8637),o=r.n(d);function m(){let e=(0,i.useParams)().projectId,{data:s,isLoading:r}=(0,l.eO)(e),{data:d}=(0,l.aN)(e),m=(0,l.Mw)(),x=(0,l.Lq)(),u=(0,l.Nf)(),[b,h]=(0,c.useState)(!1),[p,j]=(0,c.useState)(""),[g,y]=(0,c.useState)("crew"),v="owner"===d||"admin"===d,N=async s=>{s.preventDefault(),await m.mutateAsync({projectId:e,userEmail:p,role:g}),j(""),y("crew"),h(!1)},f=async(e,s)=>{await x.mutateAsync({id:e,role:s})},w=async e=>{confirm("Are you sure you want to remove this member?")&&await u.mutateAsync({id:e})},M={owner:"bg-purple-500",admin:"bg-blue-500",dept_head:"bg-green-500",crew:"bg-gray-500"};return(0,t.jsx)(a.O,{children:(0,t.jsx)(n.N,{children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-text-secondary mb-4",children:[(0,t.jsx)(o(),{href:"/dashboard",className:"hover:text-text-primary",children:"Dashboard"}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)(o(),{href:"/projects",className:"hover:text-text-primary",children:"Projects"}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)(o(),{href:"/projects/".concat(e),className:"hover:text-text-primary",children:"Project"}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)("span",{className:"text-text-primary",children:"Settings"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Project Settings"}),(0,t.jsx)("p",{className:"text-text-secondary",children:"Manage project members and permissions"})]}),v&&(0,t.jsx)("button",{onClick:()=>h(!b),className:"px-6 py-3 bg-accent-primary text-white rounded-lg hover:bg-accent-hover transition-colors font-medium",children:b?"Cancel":"+ Invite Member"})]})]}),b&&v&&(0,t.jsxs)("div",{className:"bg-background-secondary p-6 rounded-lg border border-gray-800 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Invite Team Member"}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Email Address ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"email",value:p,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 bg-background-tertiary border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary",placeholder:"colleague@example.com",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Role"}),(0,t.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 bg-background-tertiary border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary",children:[(0,t.jsx)("option",{value:"viewer",children:"Viewer - Read only"}),(0,t.jsx)("option",{value:"editor",children:"Editor - Can edit content"}),(0,t.jsx)("option",{value:"admin",children:"Admin - Can manage members"})]})]})]}),(0,t.jsx)("button",{type:"submit",disabled:m.isPending,className:"px-6 py-2 bg-accent-primary text-white rounded-lg hover:bg-accent-hover transition-colors disabled:opacity-50 font-medium",children:m.isPending?"Sending Invite...":"Send Invitation"})]})]}),(0,t.jsxs)("div",{className:"bg-background-secondary p-6 rounded-lg border border-gray-800 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Permission Levels"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries({owner:"Full control over the project",admin:"Can manage members and edit content",dept_head:"Can manage their department(s)",crew:"Basic crew member access"}).map(e=>{let[s,r]=e;return(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(M[s]," mt-1"),children:s}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:r})})]},s)})})]}),(0,t.jsxs)("div",{className:"bg-background-secondary rounded-lg border border-gray-800",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-800",children:(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Team Members"})}),r&&(0,t.jsx)("div",{className:"p-8 text-center text-text-secondary",children:"Loading members..."}),!r&&s&&0===s.length&&(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)("p",{className:"text-text-secondary mb-4",children:"No team members yet"}),v&&(0,t.jsx)("button",{onClick:()=>h(!0),className:"text-accent-primary hover:text-accent-hover",children:"Invite your first team member"})]}),!r&&s&&s.length>0&&(0,t.jsx)("div",{className:"divide-y divide-gray-800",children:s.map(e=>(0,t.jsx)("div",{className:"p-6 hover:bg-background-tertiary transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e.userName}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(M[e.role]),children:e.role}),"pending"===e.status&&(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-500",children:"Pending"})]}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:e.userEmail}),(0,t.jsxs)("p",{className:"text-xs text-text-tertiary mt-1",children:["Invited ",new Date(e.invitedAt).toLocaleDateString()]})]}),v&&"owner"!==e.role&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("select",{value:e.role,onChange:s=>f(e.id,s.target.value),disabled:x.isPending,className:"px-3 py-2 bg-background-tertiary border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-primary text-sm",children:[(0,t.jsx)("option",{value:"viewer",children:"Viewer"}),(0,t.jsx)("option",{value:"editor",children:"Editor"}),(0,t.jsx)("option",{value:"admin",children:"Admin"})]}),(0,t.jsx)("button",{onClick:()=>w(e.id),disabled:u.isPending,className:"px-4 py-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors disabled:opacity-50 text-sm",children:"Remove"})]}),"owner"===e.role&&(0,t.jsx)("span",{className:"text-sm text-text-secondary italic",children:"Project Owner"})]})},e.id))})]})]})})})}},5358:(e,s,r)=>{Promise.resolve().then(r.bind(r,461))},8175:(e,s,r)=>{"use strict";r.d(s,{Lq:()=>c,Mw:()=>i,Nf:()=>l,aN:()=>n,eO:()=>a});var t=r(7127);function a(e){return t.i.projectMembers.listByProject.useQuery({projectId:e})}function n(e){return t.i.projectMembers.getMyRole.useQuery({projectId:e})}function i(){let e=t.i.useUtils();return t.i.projectMembers.addMember.useMutation({onSuccess:s=>{e.projectMembers.listByProject.invalidate({projectId:s.projectId})}})}function c(){let e=t.i.useUtils();return t.i.projectMembers.updateRole.useMutation({onSuccess:s=>{e.projectMembers.listByProject.invalidate({projectId:s.projectId})}})}function l(){let e=t.i.useUtils();return t.i.projectMembers.removeMember.useMutation({onSuccess:()=>{e.projectMembers.listByProject.invalidate()}})}}},e=>{e.O(0,[680,661,201,637,223,956,674,718,795,358],()=>e(e.s=5358)),_N_E=e.O()}]);