(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{4351:(e,r,t)=>{"use strict";t.d(r,{db:()=>n,k:()=>o});var a=t(5183),s=t(6847);let n=(0,a.aU)(s.yA);function o(e){return(null==e?void 0:e.toDate)?e.toDate():e instanceof Date?e:new Date(e)}},4542:(e,r,t)=>{"use strict";var a=t(658);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},6149:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var a=t(2221),s=t(4542),n=t(2441),o=t(7043),i=t(7127);function l(){let e=(0,s.useParams)().inviteId,{user:r,loading:t}=(0,o.A)(),l=(0,s.useRouter)(),[_,u]=(0,n.useState)(null),c=i.i.projectMembers.acceptInvite.useMutation();return((0,n.useEffect)(()=>{async function a(){try{let r=await c.mutateAsync({inviteId:e});if(!r)throw Error("Failed to accept invitation");l.push("/projects/".concat(r.projectId))}catch(e){u(e.message||"Failed to accept invitation")}}!t&&r&&e?a():t||r||l.push("/signup?invite=".concat(e))},[r,t,e,l,c]),t)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background-primary",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"Loading..."})]})}):_?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background-primary",children:(0,a.jsxs)("div",{className:"max-w-md text-center p-8 bg-background-secondary rounded-lg border border-gray-800",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"âŒ"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4 text-red-500",children:"Invitation Error"}),(0,a.jsx)("p",{className:"text-text-secondary mb-6",children:_}),(0,a.jsx)("button",{onClick:()=>l.push("/dashboard"),className:"px-6 py-3 bg-accent-primary text-white rounded-lg hover:bg-accent-hover transition-colors",children:"Go to Dashboard"})]})}):(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background-primary",children:(0,a.jsxs)("div",{className:"max-w-md text-center p-8 bg-background-secondary rounded-lg border border-gray-800",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-primary mx-auto mb-4"}),(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Accepting Invitation..."}),(0,a.jsx)("p",{className:"text-text-secondary",children:c.isPending?"Processing your invitation...":"Redirecting to project..."})]})})}},6847:(e,r,t)=>{"use strict";t.d(r,{yA:()=>E,j2:()=>d,IG:()=>I});var a=t(6737),s=t(2478),n=t(5183),o=t(3314),i=t(5470),l=t(1391),_=t(1090);let u=(0,i.w)({server:{NODE_ENV:l.k5(["development","test","production"]).default("development"),SLACK_CLIENT_ID:l.Yj().optional(),SLACK_CLIENT_SECRET:l.Yj().optional(),SLACK_SIGNING_SECRET:l.Yj().optional(),PLAID_CLIENT_ID:l.Yj().optional(),PLAID_SECRET:l.Yj().optional(),PLAID_ENV:l.k5(["sandbox","development","production"]).optional().default("sandbox"),QUICKBOOKS_CLIENT_ID:l.Yj().optional(),QUICKBOOKS_CLIENT_SECRET:l.Yj().optional(),QUICKBOOKS_REDIRECT_URI:l.Yj().optional(),WRAPBOOK_API_KEY:l.Yj().optional(),WRAPBOOK_API_SECRET:l.Yj().optional(),NEXT_PUBLIC_APP_URL:l.Yj().optional().default("http://localhost:3000")},client:{NEXT_PUBLIC_FIREBASE_API_KEY:l.Yj().min(1),NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:l.Yj().min(1),NEXT_PUBLIC_FIREBASE_PROJECT_ID:l.Yj().min(1),NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:l.Yj().min(1),NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:l.Yj().min(1),NEXT_PUBLIC_FIREBASE_APP_ID:l.Yj().min(1),NEXT_PUBLIC_GOOGLE_MAPS_API_KEY:l.Yj().optional(),NEXT_PUBLIC_APP_URL:l.Yj().optional().default("http://localhost:3000")},runtimeEnv:{NODE_ENV:"production",NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBKS_cGxwhPAIiSLMsKvo-KIh_bi2MmXMo",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"doublecheck-9f8c1.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"doublecheck-9f8c1",NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:"doublecheck-9f8c1.firebasestorage.app",NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:"672207092025",NEXT_PUBLIC_FIREBASE_APP_ID:"1:672207092025:web:8765da71fdbae52ee790e8",NEXT_PUBLIC_GOOGLE_MAPS_API_KEY:"AIzaSyBHgWLeF_yPh10emwOEwhIVysmWYDzoXqo",NEXT_PUBLIC_APP_URL:"https://unridered-jeneva-gratifiedly.ngrok-free.dev",SLACK_CLIENT_ID:_.env.SLACK_CLIENT_ID,SLACK_CLIENT_SECRET:_.env.SLACK_CLIENT_SECRET,SLACK_SIGNING_SECRET:_.env.SLACK_SIGNING_SECRET,PLAID_CLIENT_ID:_.env.PLAID_CLIENT_ID,PLAID_SECRET:_.env.PLAID_SECRET,PLAID_ENV:_.env.PLAID_ENV||"sandbox",QUICKBOOKS_CLIENT_ID:_.env.QUICKBOOKS_CLIENT_ID,QUICKBOOKS_CLIENT_SECRET:_.env.QUICKBOOKS_CLIENT_SECRET,QUICKBOOKS_REDIRECT_URI:_.env.QUICKBOOKS_REDIRECT_URI,WRAPBOOK_API_KEY:_.env.WRAPBOOK_API_KEY,WRAPBOOK_API_SECRET:_.env.WRAPBOOK_API_SECRET},skipValidation:!!_.env.SKIP_ENV_VALIDATION}),c={apiKey:u.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:u.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:u.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:u.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:u.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:u.NEXT_PUBLIC_FIREBASE_APP_ID},E=(0,a.Dk)().length>0?(0,a.Sx)():(0,a.Wp)(c),d=(0,s.xI)(E);(0,n.aU)(E);let I=(0,o.c7)(E)},7043:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(2441),s=t(7960),n=t(7981),o=t(5183),i=t(4351);function l(){let{firebaseUser:e,user:r,loading:t,setFirebaseUser:l,setUser:_,setLoading:u}=(0,n.n)();return(0,a.useEffect)(()=>{let e=!0,r=null,t=(0,s.Bh)(async t=>{if(e)if(l(t),t){u(!0);let a=(0,o.H9)(i.db,"users",t.uid);r=(0,o.aQ)(a,r=>{if(e){if(r.exists()){let e=r.data();_({id:r.id,email:e.email,displayName:e.displayName,orgId:e.orgId,role:e.role,photoURL:e.photoURL,createdAt:(0,i.k)(e.createdAt),updatedAt:(0,i.k)(e.updatedAt)})}else _(null);u(!1)}},r=>{e&&(_(null),u(!1))})}else _(null),u(!1)});return()=>{e=!1,t(),r&&r()}},[l,_,u]),{firebaseUser:e,user:r,loading:t}}},7127:(e,r,t)=>{"use strict";t.d(r,{i:()=>a});let a=(0,t(5974).pY)()},7960:(e,r,t)=>{"use strict";t.d(r,{Bh:()=>c,CI:()=>u,G6:()=>_,Hh:()=>l,Jv:()=>i}),t(2441);var a=t(2478),s=t(5183),n=t(6847),o=t(4351);let i=async(e,r)=>{try{return{user:(await (0,a.x9)(n.j2,e,r)).user,error:null}}catch(e){return{user:null,error:e.message}}},l=async(e,r)=>{try{let t=await (0,a.eJ)(n.j2,e,r);if(t.user){let r=(0,s.H9)(o.db,"users",t.user.uid);await (0,s.BN)(r,{id:t.user.uid,email:t.user.email,displayName:t.user.displayName||e.split("@")[0],orgId:"default-org",role:"admin",photoURL:t.user.photoURL||null,createdAt:(0,s.O5)(),updatedAt:(0,s.O5)()})}return{user:t.user,error:null}}catch(e){return{user:null,error:e.message}}},_=async()=>{try{let e=console.error,r=console.warn;console.error=()=>{},console.warn=()=>{};let t=new a.HF;t.setCustomParameters({prompt:"select_account"});let i=await (0,a.df)(n.j2,t);if(console.error=e,console.warn=r,i.user){let e=(0,s.H9)(o.db,"users",i.user.uid);(0,s.x7)(e).then(r=>{if(!r.exists()){var t;(0,s.BN)(e,{id:i.user.uid,email:i.user.email,displayName:i.user.displayName||(null==(t=i.user.email)?void 0:t.split("@")[0]),orgId:"default-org",role:"admin",photoURL:i.user.photoURL||null,createdAt:(0,s.O5)(),updatedAt:(0,s.O5)()}).catch(()=>{})}}).catch(()=>{})}return{user:i.user,error:null}}catch(e){return{user:null,error:e.message}}},u=async()=>{try{return await (0,a.CI)(n.j2),{error:null}}catch(e){return{error:e.message}}},c=e=>(0,a.hg)(n.j2,e)},7981:(e,r,t)=>{"use strict";t.d(r,{n:()=>a});let a=(0,t(8286).v)(e=>({firebaseUser:null,user:null,loading:!0,setFirebaseUser:r=>e({firebaseUser:r}),setUser:r=>e({user:r}),setLoading:r=>e({loading:r}),signOut:()=>e({firebaseUser:null,user:null})}))},9574:(e,r,t)=>{Promise.resolve().then(t.bind(t,6149))}},e=>{e.O(0,[680,661,201,223,718,795,358],()=>e(e.s=9574)),_N_E=e.O()}]);